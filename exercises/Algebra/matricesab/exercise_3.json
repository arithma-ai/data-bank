{
    "script": "Soit $n\\geq 3$. On dit qu'une matrice $M\\in\\mathcal M_n(\\mathbb R)$ est magique\r\nsi, pour tout $j\\in\\{1,\\dots,n\\}$, on a \r\n$$\\sum_{i=1}^n m_{i,j}=\\sum_{i=1}^n m_{j,i}=\\sum_{i=1}^n m_{i,i}=\\sum_{i=1}^n m_{i,n+1-i}.$$\r\nOn note $MG(n)$ l'ensemble des matrices magiques d'ordre $n$.Que signifie être une matrice magique?Montrer que $MG(n)$ est un espace vectoriel.Montrer que l'application $\\phi:MG(n)\\to\\mathcal M_{n-2,n-1}(\\mathbb R)\\times\\mathbb R^{n-2}$, qui envoie la matrice $M$\r\nqui s'écrit \r\n$$M=\\left(\r\n\\begin{array}{ccccc}\r\n&&&&m_{1,n}\\\\\r\n&M_1&&&\\vdots\\\\\r\n&&&&m_{n-2,n}\\\\\r\nm_{n-1,1}&\\dots&\\dots&m_{n-1,n-1}&m_{n-1,n}\\\\\r\nm_{n,1}&\\dots&\\dots&m_{n,n-1}&m_{n,n}\r\n\\end{array}\\right)$$\r\nsur $(M_1,m_{1,n},m_{n-1,1},m_{n-1,3},m_{n-1,4},\\dots,m_{n-1,n-2})$ est un isomorphisme d'espace vectoriel.En déduire la dimension de $MG(n)$.",
    "hint": "Attention, on ne peut faire un raisonnement sur la dimension car on ne connait pas celle de $MG(n)$. Il faut chercher à résoudre $\\phi(M)=(A,a_1,\\dots,a_{n-2})$ et déterminer les coefficients $m_{i,j}$ peu à peu, en remarquant qu'on sait déjà la valeur de $m_{i,j}$ pour $1\\leq i\\leq n-2$ et $1\\leq j\\leq n-1$, de $m_{1,n}$ ainsi que de $m_{n-1,1},m_{n-1,3},m_{n-1,4},\\dots,m_{n-1,n-2}$.",
    "solution": "La condition signifie que les sommes des coefficients de toutes les lignes, de toutes les colonnes, et des deux diagonales de la matrice sont égales.On laisse au lecteur le soin de vérifier que $MG(n)$ est un sous-espace vectoriel de $\\mathcal M_n(\\mathbb R)$.L'application $\\phi$ est clairement linéaire. Pour prouver que c'est un isomorphisme d'espace vectoriel, on va prouver directement qu'il est bijectif\r\n(on ne connait pas la dimension de l'espace de départ, impossible de se contenter de l'injectivité de $\\phi$). \r\nSoit donc $(A,a_1,\\dots,a_{n-2})\\in \\mathcal M_{n-2,n-1}(\\mathbb R)\\times\\mathbb R^{n-2}$ et on cherche une matrice \r\n$M$ de $MG(n)$ vérifiant $\\phi(M)=(A,a_1,\\dots,a_{n-2})$. On sait déjà ce que vaut $m_{i,j}$ pour $1\\leq i\\leq n-2$ et $1\\leq j\\leq n-1$.\r\nOn sait aussi ce que doit valoir $m_{1,n}$ ainsi que $m_{n-1,1},m_{n-1,3},m_{n-1,4},\\dots,m_{n-1,n-2}$. Cherchons les autres coefficients, et\r\nnotons $S=\\sum_{i=1}^n m_{1,i}$ (valeur déjà déterminée). Puisqu'on connait tous les coefficients de la $j$-ième ligne,\r\navec $j\\leq n-2$, sauf $m_{j,n}$, et que la somme des coefficients de la ligne doit valoir $S$, on détermine uniquement\r\n$m_{j,n}$ (qui vaut $S-\\sum_{i<n}m_{j,i}$). On connait aussi tous les coefficients de la première colonne, sauf $m_{n,1}$, et\r\non sait que la somme fait $S$ : ceci détermine uniquement $m_{n,1}$. On connait ensuite tous les coefficient\r\nde la diagonale en bas à gauche vers en haut à droite sauf $m_{n-1,2}$. Ceci détermine uniquement ce coefficient\r\n(puisque la somme doit valoir $S$). On peut alors répéter le processus pour toutes les colonnes de la $2$-ème à la \r\n$n-2$ème : ceci détermine uniquement $m_{n,i}$ pour $i\\leq n-2$. Reste à déterminer les quatre derniers coefficients,\r\n$m_{n-1,n-1}$, $m_{n-1,n}$, $m_{n,n-1}$ et $m_{n,n}$. Notons $S_1$ et $S_2$ la somme des coefficients déjà connus sur la colonne $n-1$ \r\net sur la colonne $n$, $S_3$ et $S_4$ les sommes des coefficients déjà connus sur les lignes $n-1$ et $n$ et $S_5$ la somme \r\ndes coefficients déjà connus sur la diagonale principale. Une matrice magique solution doit vérifier le système d'équation :\r\n$$\\left\\{\r\n\\begin{array}{rcl}\r\nm_{n-1,n-1}+m_{n-1,n}&=&S-S_1\\\\\r\nm_{n,n-1}+m_{n,n}&=&S-S_2\\\\\r\nm_{n-1,n-1}+m_{n,n-1}&=&S-S_3\\\\\r\nm_{n-1,n}+m_{n,n}&=&S-S_4\\\\\r\nm_{n-1,n-1}+m_{n,n}&=&S-S_5.\r\n\\end{array}\\right.$$\r\nCela nous fait cinq équations pour quatre inconnues...mais une équation est en trop. En effet, si on fait $L_1+L_2-L_3$, on trouve à gauche\r\n$m_{n-1,n}+m_{n,n}$, comme dans le membre de gauche de $L_4$. Pour la partie droite, on trouve :\r\n\\begin{eqnarray*}\r\nS-S_1-S_2+S_3&=&\r\nS-\\sum_{i=1}^{n-2}(m_{n-1,i}+m_{n,i})+S_3\\\\\r\n&=&S-\\sum_{i=1}^{n-2} (S-\\sum_{j=1}^{n-2}m_{j,i})+S_3\\\\\r\n&=&S-\\big((n-2)S-\\sum_{j=1}^{n-2}\\sum_{i=1}^{n-2}m_{j,i}-\\sum_{j=1}^{n-2}m_{j,n-1}\\big)\\\\\r\n&=&S-\\sum_{j=1}^{n-2}\\big(S-\\sum_{i=1}^{n-1}m_{j,i}\\big)\\\\\r\n&=&S-\\sum_{j=1}^{n-2}m_{j,n}=S-S_4.\r\n\\end{eqnarray*}\r\nL'équation $L_4$ est donc redondante puisqu'égale à $L_1+L_2-L_3$. On peut donc l'éliminer du système d'équations, et on prouve\r\nfacilement que ce système de quatre équations à quatre inconnues à une unique solution. Ceci conclut quant à la bijectivité de $\\phi$.Puisque $\\phi$ est un isomorphisme d'espace vectoriel, on a \r\n$$\\dim(MG(n))=\\dim\\big(\\mathcal M_{n-2,n-1}(\\mathbb R)\\times\\mathbb R^{n-2}\\big)=n(n-2).$$",
    "lang": "french"
}
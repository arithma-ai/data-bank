{
    "script": "Un joueur décide de jouer aux machines à sous. Il va jouer sur deux machines ${\\mathcal A}$ et ${\\mathcal B}$ qui sont réglées de la facon suivante :la probabilité de gagner sur la machine ${\\mathcal A}$ est de $\\frac15$ ;la probabilité de gagner sur la machine ${\\mathcal B}$ est de $\\frac1{10}$.Comme le joueur soupçonne les machines d'avoir des réglages différents, mais ne sait pas laquelle est la plus favorable, il décide d'adopter la stratégie suivante :il commence par choisir une machine au hasard ;après chaque partie, il change de machine s'il vient de perdre, il rejoue sur la même machine s'il vient de gagner.On définit pour tout $k\\ge 1$ les événements suivants :$G_k$ : \"Le joueur gagne la $k$-ième partie\".$A_k$ : \"La $k$-ième partie se déroule sur la machine ${\\mathcal A}$\".Écrire une fonction Python $\\verb+jouer(n)+$ qui simule le déroulement de $n$ parties et retourne la proportion de parties gagnées parmi ces $n$ parties.Determiner la probabilité de gagner la première partie.Déterminer la probabilité de gagner la deuxième partie.Sachant que la deuxième partie a été gagnée, quelle est la probabilité que la première partie ait eu lieu sur la machine ${\\mathcal A}$?Soit $k\\ge 1$.Exprimer $P(G_k)$ en fonction de $P(A_k)$.Montrer que $P(A_{k+1})=-\\frac7{10}P(A_k)+\\frac9{10}$.En déduire $P(A_k)$ puis $P(G_k)$ en fonction de $k$.Pour $n\\ge 1$, on pose $S_n=\\sum_{k=1}^nP(G_k)$. Calculer $S_n$ puis déterminer la limite de $\\frac{S_n}n$ quand $n\\to+\\infty$.",
    "hint": "Appliquer la formule des probabilités totales.Faire un arbre.Appliquer la formule de Bayes.Appliquer la formule des probabilités totales.Il y a deux éventualités pour jouer sur la machine $\\mathcal A$ la $k+1$-ième partie suivant ce qui se passe à la $k$-ième.Reconnaitre une suite arithmético-géométrique $u_{n+1}=au_n+b$. On résout $\\ell=a\\ell+b$ puis on étudie $v_n=u_n-\\ell$.Somme d'une suite géométrique.",
    "solution": "Voici un algorithme possible. La variable machine représente la machine avec laquelle on joue (0 pour la machine A, 1 pour la machine B).import randomdef jouer(n):machine=0total=0if (random.random()>0.5):machine=1else:machine=0for i in range(n):if (machine==0):if (random.random()<0.2):total=total+1else:machine=1else:if (random.random()<0.1):total=total+1else:machine=0return (total/n)D'après la formule des probabilités totales, on a \r\n$$P(G_1)=P(G_1|A_1)P(A_1)+P(G_1|\\overline{A_1})P(\\overline{A_1})=\\frac 1{5}\\times\\frac 12+\\frac1{10}\\times\\frac 12=\\frac3{20}.$$Le plus facile, pour calculer $G_2$, est de réaliser un arbre de probabilités avec 8 feuilles. La première bifurcation correspond au choix initial de la machine. La deuxième bifurcation correspond au résultat possible du premier tirage. La troisième bifurcation correspond au résultat possible du deuxième tirage. On trouve finalement :\r\n$$P(G_2)=\\frac 12\\left(\\frac15\\times\\frac 15+\\frac45\\times\\frac1{10}\\right)+\\frac12\\left(\\frac1{10}\\times\\frac1{10}+\\frac{9}{10}\\times\\frac{1}{5}\\right)=\\frac{31}{200}.$$\r\nSi on veut écrire ceci plus formellement, on peut dire que $A_1\\cap A_2$, $A_1\\cap\\overline{A_2}$, $\\bar{A_1}\\cap A_2$ et $\\bar{A_1}\\cap\\bar{A_2}$ \r\nest une partition de $\\Omega$ et donc, d'après la formule des probabilités totales, \r\n\\begin{align*}\r\nP(G_2)&=P(A_1\\cap A_2)P(G_2|A_1\\cap A_2)+P(A_1\\cap\\bar{A_2})P(G_2|A_1\\cap\\bar{A_2})\\\\\r\n&\\quad\\quad\\quad+ P(\\bar{A_1}\\cap A_2)P(G_2|\\bar{A_1}\\cap A_2)+P(\\bar{A_1}\\cap\\bar{A_2})P(G_2|\\bar{A_1}\\cap\\bar{A_2}).\r\n\\end{align*}\r\nReste à calculer les diverses probabilités. Par exemple, \r\n$$P(A_1\\cap A_2)=P(A_1)P(A_2|A_1)=\\frac 12\\times\\frac 15$$\r\ntandis que \r\n$$P(G_2|A_1\\cap A_2)=P(G_2|A_2)=1/5.$$Appliquons la formule de Bayes : on a\r\n$$P(A_1|G_2)=\\frac{P(A_1\\cap G_2)}{P(G_2)}=\\frac{P(G_2|A_1)P(A_1)}{P(G_2)}.$$\r\nLa probabilité conditionnelle $P(G_2|A_1)$ se calcule également avec un arbre (en fait, un extrait de l'arbre de la question précédente), et on trouve\r\n$$P(G_2|A_1)=\\frac 1{5}\\times\\frac 15+\\frac 4{5}\\times\\frac1{10}=\\frac 3{25}.$$\r\nOn en déduit que \r\n$$P(A_1|G_2)=\\frac 3{50}\\times\\frac{200}{31}=\\frac{12}{31}.$$On applique la formule des probabilités totales comme à la première question. On trouve\r\n\\begin{eqnarray*}\r\nP(G_k)&=&P(G_k|A_k)P(A_k)+P(G_k|\\overline{A_k})P(\\overline{A_k})\\\\\r\n&=&\\frac 15P(A_k)+\\frac1{10}(1-P(A_k))\\\\\r\n&=&\\frac1{10}\\big(1+P(A_k)\\big).\r\n\\end{eqnarray*}On joue sur la machine $\\mathcal A$ la $k+1$-ième partie si et seulement sion joue sur la machine $\\mathcal A$ la $k$-ième partie et on gagne;on joue sur la machine $\\mathcal B$ la $k$-ième partie et on perd.On a donc\r\n\\begin{eqnarray*}\r\nP(A_{k+1})&=&P(G_k\\cap A_k)+P(\\overline{G_k}\\cap \\overline{A_k})\\\\\r\n&=&P(G_k|A_k)P(A_k)+P(\\overline{G_k}|\\overline{A_k})P(\\overline{A_k})\\\\\r\n&=&\\frac 15P(A_k)+\\frac9{10}\\big(1-P(A_k)\\big)\\\\\r\n&=&\\frac{-7}{10}P(A_k)+\\frac 9{10}.\r\n\\end{eqnarray*}On reconnait une suite arithmético-géométrique. L'équation aux limites possibles \r\n$$\\ell=\\frac{-7\\ell}{10}+\\frac9{10}$$\r\ndonne $\\ell=\\frac9{17}$. On introduit ensuite $v_k=P(A_k)-\\frac{9}{17}$ et on vérifie facilement que \r\n$$v_{k+1}=\\frac{-7}{10}v_k.$$\r\nOn a donc $v_k=\\left(\\frac{-7}{10}\\right)^{k-1}v_1$ et donc\r\n\\begin{eqnarray*}\r\nP(A_k)&=&\\left(-\\frac7{10}\\right)^{k-1}\\left(P(A_1)-\\frac9{17}\\right)+\\frac{9}{17}\\\\\r\n&=&\\frac{-1}{34}\\left(-\\frac7{10}\\right)^{k-1}+\\frac9{17}.\r\n\\end{eqnarray*}\r\nOn en déduit alors que \r\n$$P(G_k)=\\frac{13}{85}-\\frac 1{340}\\left(-\\frac7{10}\\right)^{k-1}.$$On reconnait la somme d'une suite géométrique. On a donc\r\n\\begin{eqnarray*}\r\n\\sum_{k=1}^n P(G_k)&=&\\frac{13}{85}n-\\frac{1}{340}\\left(\\frac{1-\\left(-\\frac7{10}\\right)^{n}}{1+\\frac 7{10}}\\right)\\\\\r\n&=&\\frac{13n}{85}-\\frac{1}{34\\times 17}\\left(1-\\left(-\\frac7{10}\\right)^{n}\\right).\r\n\\end{eqnarray*}\r\nEn particulier, on a que $S_n/n$ tend vers $\\frac{13}{85}$, ce qui est proche du résultat trouvé en faisant tourner l'algorithme de la première question pour une grande valeur de $n$.",
    "lang": "french"
}